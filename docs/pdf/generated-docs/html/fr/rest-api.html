<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="© Hurence">
<title>REST API</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>REST API</h1>
<div class="details">
<span id="author" class="author">© Hurence</span><br>
<span id="email" class="email"><a href="mailto:contact@hurence.com">contact@hurence.com</a></span><br>
<span id="revnumber">version v1.0,</span>
<span id="revdate">04.07.2020</span>
<br><span id="revremark">First book</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table des matières</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#description-détaillée-des-endpoints">Description détaillée des endpoints</a>
<ul class="sectlevel2">
<li><a href="#ingestion-de-données">Ingestion de données</a>
<ul class="sectlevel3">
<li><a href="#import-csv">POST /api/historian/v0/import/csv</a></li>
<li><a href="#import-json">POST /api/historian/v0/import/json</a></li>
</ul>
</li>
<li><a href="#export-de-données">Export de données</a>
<ul class="sectlevel3">
<li><a href="#export-csv">POST /api/historian/v0/export/csv</a></li>
</ul>
</li>
<li><a href="#interactions-avec-grafana">Interactions avec Grafana</a>
<ul class="sectlevel3">
<li><a href="#api-compatible-avec-le-plugin-simplejson">Api compatible avec le plugin "SimpleJson"</a>
<ul class="sectlevel4">
<li><a href="#grafana-simplejson-root">GET /api/grafana/simplejson</a></li>
<li><a href="#grafana-simplejson-query">POST /api/grafana/simplejson/query</a></li>
<li><a href="#grafana-simplejson-search">POST /api/grafana/simplejson/search</a></li>
<li><a href="#grafana-simplejson-annotations">POST /api/grafana/simplejson/annotations</a></li>
<li><a href="#grafana-simplejson-tag-keys">POST /api/grafana/simplejson/tag-keys</a></li>
<li><a href="#grafana-simplejson-tag-values">POST /api/grafana/simplejson/tag-values</a></li>
</ul>
</li>
<li><a href="#api-compatible-avec-le-plugin-hurence-historian">Api compatible avec le plugin "Hurence-Historian"</a>
<ul class="sectlevel4">
<li><a href="#grafana-hurence-datasource-root">GET /api/grafana/v0</a></li>
<li><a href="#grafana-hurence-datasource-query">POST /api/grafana/v0/query</a></li>
<li><a href="#grafana-hurence-datasource-search">POST /api/grafana/v0/search</a></li>
<li><a href="#grafana-hurence-datasource-search-values">POST /api/grafana/v0/search/values</a></li>
<li><a href="#grafana-hurence-datasource-annotations">POST /api/grafana/v0/annotations</a></li>
<li><a href="#grafana-hurence-datasource-tag-keys">POST /api/grafana/v0/tag-keys</a></li>
<li><a href="#grafana-hurence-datasource-tag-values">POST /api/grafana/simplejson/tag-values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>L&#8217;api REST de l&#8217;historian est actuellement composée des endpoints ci-dessous :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>/api/historian/v0</em> : L&#8217;api principale de l&#8217;historian qui ne contient actuellement que des endpoints pour l&#8217;import et l&#8217;export de données.</p>
</li>
<li>
<p>POST <a href="#import-csv"><em>/api/historian/v0/import/csv</em></a>: Un endpoint pour importer des measures depuis des fichiers csv.</p>
</li>
<li>
<p>POST <a href="#import-json"><em>/api/historian/v0/import/json</em></a>: Un endpoint pour importer des measures au format json envoyé dans le corps de la requête.</p>
</li>
<li>
<p>POST <a href="#export-csv"><em>/api/historian/v0/export/csv</em></a>: Un endpoint pour exporter des measures au format csv.</p>
</li>
<li>
<p>GET <a href="#grafana-simplejson-root"><em>/api/grafana/simplejson</em></a>: L&#8217;api pour interagir avec Grafana en utilisant le plugin datasource "SimpleJson".</p>
</li>
<li>
<p>POST <a href="#grafana-simplejson-query"><em>/api/grafana/simplejson/query</em></a>: Permet d&#8217;obtenir les measures de l&#8217;historian sur la base d&#8217;une requête.</p>
</li>
<li>
<p>POST <a href="#grafana-simplejson-search"><em>/api/grafana/simplejson/search</em></a>: Permet d&#8217;obtenir les noms des métriques de l&#8217;historian.</p>
</li>
<li>
<p>POST <a href="#grafana-simplejson-annotations"><em>/api/grafana/simplejson/annotations</em></a>: Permet d&#8217;obtenir les annotations enregistrées dans l&#8217;historian.</p>
</li>
<li>
<p>POST <a href="#grafana-simplejson-tag-keys"><em>/api/grafana/simplejson/tag-keys</em></a>: Permet d&#8217;obtenir les clés disponibles pour utiliser l&#8217;endpoint '<em>/api/grafana/simplejson/tag-values</em>'.</p>
</li>
<li>
<p>POST <a href="#grafana-simplejson-tag-values"><em>/api/grafana/simplejson/tag-values</em></a>: Permet d&#8217;obtenir les valeurs possibles pour la clé indiquée.</p>
</li>
<li>
<p>GET <a href="#grafana-hurence-datasource-root"><em>/api/grafana/v0</em></a>: L&#8217;api pour interagir avec Grafana en utilisant le plugin datasource de hurence "Hurence-Historian".</p>
</li>
<li>
<p>POST <a href="#grafana-hurence-datasource-query"><em>/api/grafana/v0/query</em></a>: Permet d&#8217;obtenir les measures de l&#8217;historian.</p>
</li>
<li>
<p>POST <a href="#grafana-hurence-datasource-search"><em>/api/grafana/v0/search</em></a>: Permet d&#8217;obtenir les noms des métriques de l&#8217;historian.</p>
</li>
<li>
<p>POST <a href="#grafana-hurence-datasource-search-values"><em>/api/grafana/v0/search/values</em></a>: Permet d&#8217;obtenir les valeurs pour la clé indiquée.</p>
</li>
<li>
<p>POST <a href="#grafana-hurence-datasource-annotations"><em>/api/grafana/v0/annotations</em></a>: Permet d&#8217;obtenir les annotations enregistrées dans l&#8217;historian.</p>
</li>
<li>
<p>POST <a href="#grafana-hurence-datasource-tag-keys"><em>/api/grafana/v0/tag-keys</em></a>: Permet d&#8217;obtenir les clés disponibles pour utiliser l&#8217;endpoint '<em>/api/grafana/v0/tag-values</em>'.</p>
</li>
<li>
<p>POST <a href="#grafana-hurence-datasource-tag-values"><em>/api/grafana/v0/tag-values</em></a>: Permet d&#8217;obtenir les valeurs possibles pour la clé indiquée.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les endpoints 'tag-keys' et 'tag-values' ne sont utiles que pour Grafana.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description-détaillée-des-endpoints"><a class="anchor" href="#description-détaillée-des-endpoints"></a>Description détaillée des endpoints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ingestion-de-données"><a class="anchor" href="#ingestion-de-données"></a>Ingestion de données</h3>
<div class="paragraph">
<p>Ces endpoints servent à injecter des measures dans l&#8217;historian :</p>
</div>
<div class="sect3">
<h4 id="import-csv"><a class="anchor" href="#import-csv"></a>POST /api/historian/v0/import/csv</h4>
<div class="paragraph">
<p>Permet d&#8217;injecter des measures dans l&#8217;historian à partir de fichiers csv.
Le format de la requête attendue est une requête avec Content-Type: multipart/form-data;</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Paramètres de la requête</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 7%;">
<col style="width: 39%;">
<col style="width: 7%;">
<col style="width: 30%;">
<col style="width: 7%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">attribut</th>
<th class="tableblock halign-left valign-top">multivalué</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">my_csv_file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">le chemin des fichier csv à importer. Attention chaque fichier est importé individuellement de manière indépendante.
Autrement dit, joindre plusieurs fichiers ou faire une requête par fichier est équivalent. Les paramètres
 de la requêtes sont communs à tous les fichiers listés dans la requête. Les fichiers doivent obligatoirement contenir un header.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mapping.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">le nom de la colonne qui correspond à "name". C&#8217;est l&#8217;identifiant principal d&#8217;une métrique.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">doit être un nom de colonne du header des fichiers csv joints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"metric"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mapping.value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">le nom de la colonne qui correspond à "value". C&#8217;est la valeur du measure.
Les valeurs de cette colonne doivent être des valeurs numériques.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit être un nom de colonne du header des fichiers csv joints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"value"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mapping.timestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom de la colonne du header qui correspond à "timestamp". C&#8217;est la date du measure.
Par défaut cette colonne doit contenir un timestamp epoch en milliseconde (voir <a href="#import-csv-format_date">format_date</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit être un nom de colonne du header des fichiers csv joints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"timestamp"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mapping.quality</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom de la colonne du header qui correspond à "quality". C&#8217;est la qualité du measure
(pour le moment la qualité n&#8217;est pas stockée dans l&#8217;historian)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit être un nom de colonne du header des fichiers csv joints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"quality"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mapping.tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les noms des colonnes du header à considérer comme un tag. Les tags sont des notions qui décrivent la métrique en plus de son
nom (colonne "name"). Toutes les colonnes non renseignées dans le mapping seront ignorées lors de l&#8217;injection.
TODO expliquer on prend le first</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit être un nom de colonne du header des fichiers csv joints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="import-csv-format_date"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">format_date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le format attendu pour les valeurs de la colonne "timestamp".</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit être soit une valeur parmi: [MILLISECONDS_EPOCH,SECONDS_EPOCH,MICROSECONDS_EPOCH,NANOSECONDS_EPOCH]
NANOSECONDS_EPOCH :  la valeur doit être le nombre de nanosecondes depuis le 1 janvier 1970 UTC.
MICROSECONDS_EPOCH :  la valeur doit être le nombre de microsecondes depuis le 1 janvier 1970 UTC.
MILLISECONDS_EPOCH :  la valeur doit être le nombre de millisecondes depuis le 1 janvier 1970 UTC.
SECONDS_EPOCH :  la valeur doit être le nombre de secondes depuis le 1 janvier 1970 UTC.
Soit une autre valeur, dans ce cas cette valeur doit être un format de date valide, par exemple "yyyy-mm-dd".</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"MILLISECONDS_EPOCH"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timezone_date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">le timezone pour les dates dans le csv.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">doit être un timezone valide.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"UTC"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group_by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ce paramètre est très important ! Si il est mal utilisé il est possible de corrompre les données déjà existantes.
Il faut lister ici tous les champs qui vont être utilisés pour construire les chunks. Par défaut on groupe les measures
en chunk uniquement en fonction de leur nom. Cependant il est possible de grouper également en fonction de la valeur de
certains tags. Il faut savoir que cela va impacter la manière dont les données seront récupérées par la suite.
Par exemple si on injecte des données en groupant par "name" et le tag "usine". Alors on pourra requêter les valeurs
pour chaque usine en filtrant sur la bonne valeur du tag usine (voir l&#8217;api pour requêter les measures). Seulement si
par la suite quelqu&#8217;un injecte d&#8217;autres données sans grouper par le tag "usine" alors les données vont se retrouver mélangées.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les valeurs acceptées sont "name" (peu importe le mapping utilisez "name" et non le nom de la colonne dans le csv).
Sinon les autres valeurs acceptées sont les noms de colonnes ajoutées comme tag.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"name"</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>S’il y a un problème avec la requête on reçoit une réponse 400 BAD_REQUEST.</p>
</li>
<li>
<p>Si tout s&#8217;est bien passé on reçoit une réponse 201 CREATED :</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Description de la réponse</caption>
<colgroup>
<col style="width: 20.6349%;">
<col style="width: 15.873%;">
<col style="width: 63.4921%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">les tags renseignés dans la requête.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">grouped_by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">les champs qui sont utilisés pour le group by (renseignés dans la requête).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">report</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">json object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">un rapport sur les chunks qui ont été injectés.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Exemple de commande curl minimale :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="curl">curl -X POST \
http://localhost:8080/historian-server/ingestion/csv \
-F 'my_csv_file=@path/de/mon/csv/file.csv'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple csv minimal :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">metric,timestamp,value
metric_1, 1, 1.2
metric_1, 2, 2
metric_1, 3, 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de commande curl :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="curl">curl -X POST \
http://localhost:8080/historian-server/ingestion/csv \
-F 'my_csv_file=@path/de/mon/csv/file.csv' \
-F 'my_csv_file2=@path/de/mon/csv/file2.csv' \
-F mapping.name=metric_name_2 \
-F mapping.value=value_2 \
-F mapping.timestamp=timestamp \
-F mapping.quality=quality \
-F mapping.tags=sensor \
-F mapping.tags=code_install \
-F timestamp_unit=MILLISECONDS_EPOCH \
-F group_by=name \
-F group_by=tags.sensor \
-F format_date=yyyy-D-m HH:mm:ss.SSS \
-F timezone_date=UTC \</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de fichier csv :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="error">metric_name_2,timestamp,value_2,quality,sensor,code_install</span>
<span class="error">metric_1, 1970-1-1 00:00:00.001, 1.2 ,1.4,sensor_1,code_1</span>
<span class="error">metric_1, 1970-1-1 00:00:00.002, 2 ,1.4,sensor_1,code_1</span>
<span class="error">metric_1, 1970-1-1 00:00:00.003, 3 ,1.4,sensor_2,code_1</span>
<span class="error">metric_2, 1970-1-1 00:00:00.004, 4 ,1.5,sensor_2,code_1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>avec la requête suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="curl">curl -X POST \
http://localhost:8080/historian-server/ingestion/csv \
-F 'my_csv_file=@path/de/mon/csv/file.csv' \
-F 'my_csv_file2=@path/de/mon/csv/file.csv' \
-F mapping.name=metric_name_2 \
-F mapping.value=value_2 \
-F mapping.timestamp=timestamp \
-F mapping.quality=quality \
-F mapping.tags=sensor \
-F mapping.tags=code_install \
-F timestamp_unit=MILLISECONDS_EPOCH \
-F group_by=name \
-F group_by=tags.sensor \
-F format_date=yyyy-D-m HH:mm:ss.SSS \
-F timezone_date=UTC \</code></pre>
</div>
</div>
<div class="paragraph">
<p>et le fichier "file.csv" :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="error">metric_name_2,timestamp,value_2,quality,sensor,code_install</span>
<span class="error">metric_1, 1970-1-1 00:00:00.001, 1.2 ,1.4,sensor_1,code_1</span>
<span class="error">metric_1, 1970-1-1 00:00:00.002, 2 ,1.4,sensor_1,code_1</span>
<span class="error">metric_1, 1970-1-1 00:00:00.003, 3 ,1.4,sensor_2,code_1</span>
<span class="error">metric_2, 1970-1-1 00:00:00.004, 4 ,1.5,sensor_2,code_1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>on reçoit cette réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">sensor</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">code_install</span><span class="delimiter">&quot;</span></span>],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">grouped_by</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">sensor</span><span class="delimiter">&quot;</span></span>],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">report</span><span class="delimiter">&quot;</span></span> : [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">metric_1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sensor</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sensor_1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_points_injected</span><span class="delimiter">&quot;</span></span>: <span class="integer">4</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_point_failed</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_chunk_created</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">metric_1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sensor</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sensor_2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_points_injected</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_point_failed</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_chunk_created</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">metric_2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sensor</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sensor_2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_points_injected</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_point_failed</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">number_of_chunk_created</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(on remarque ici que l&#8217;on a utilisé le même fichier deux fois.)</p>
</div>
</div>
<div class="sect3">
<h4 id="import-json"><a class="anchor" href="#import-json"></a>POST /api/historian/v0/import/json</h4>
<div class="paragraph">
<p>Permet d&#8217;injecter des measures dans l&#8217;historian à partir d&#8217;un corps de requête au format json.
Le format de la requête attendue est une requête avec Content-Type: application/json;</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">temp</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">measures</span><span class="delimiter">&quot;</span></span>: [
            [<span class="integer">100</span>, <span class="float">1.0</span>],
            [<span class="integer">200</span>, <span class="float">1.2</span>]
        ]
    },
   {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">temp_2</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">measures</span><span class="delimiter">&quot;</span></span>: [
           [<span class="integer">100</span>, <span class="float">1.7</span>],
           [<span class="integer">200</span>, <span class="float">1.9</span>]
        ]
   }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de requête minimale :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">temp</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">measures</span><span class="delimiter">&quot;</span></span>: [
            [<span class="integer">100</span>, <span class="float">1.0</span>]
        ]
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le corps de la requête attendue est une liste json d&#8217;objets. Chaque objet doit être composé des attributs suivants :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Propriété des objets json</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">/name</th>
<th class="tableblock halign-left valign-top">String</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom de la métrique pour laquelle on va injecter les measures.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/measures</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array d&#8217;array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les measures pour créer un chunk avec le nom de métrique assigné à 'name'. Les measures sont a renseigner sous la forme
[[timestsamp&lt;long&gt;, value&lt;double&gt;],..,[timestsamp&lt;long&gt;, value&lt;double&gt;]].</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Exemple de réponse</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>:[
      [<span class="integer">622</span>,<span class="integer">1450754160000</span>],
      [<span class="integer">365</span>,<span class="integer">1450754220000</span>]
    ]
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_90</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>:[
      [<span class="integer">861</span>,<span class="integer">1450754160000</span>],
      [<span class="integer">767</span>,<span class="integer">1450754220000</span>]
    ]
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="export-de-données"><a class="anchor" href="#export-de-données"></a>Export de données</h3>
<div class="sect3">
<h4 id="export-csv"><a class="anchor" href="#export-csv"></a>POST /api/historian/v0/export/csv</h4>
<div class="paragraph">
<p>Permet de rechercher des measures et les exporter en csv pour les métriques désirées.</p>
</div>
<div class="paragraph">
<p>Ce endpoint utilise la même requête que l&#8217;endpoint query mais il donne la réponse en csv.</p>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">metric,value,date
temp_a,622.1,1477895624866
temp_a,-3.0,1477916224866
temp_a,365.0,1477917224866
temp_b,861.0,1477895624866
temp_b,767.0,1477917224866</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="interactions-avec-grafana"><a class="anchor" href="#interactions-avec-grafana"></a>Interactions avec Grafana</h3>
<div class="paragraph">
<p>Les api ci-dessous sont utilisées pour interagir avec Grafana en utilisant certaines datasources (une notion de Grafana).</p>
</div>
<div class="sect3">
<h4 id="api-compatible-avec-le-plugin-simplejson"><a class="anchor" href="#api-compatible-avec-le-plugin-simplejson"></a>Api compatible avec le plugin "SimpleJson"</h4>
<div class="sect4">
<h5 id="grafana-simplejson-root"><a class="anchor" href="#grafana-simplejson-root"></a>GET /api/grafana/simplejson</h5>
<div class="paragraph">
<p>Cet endpoint renvoie une réponse 200 'OK' si l&#8217;historian fonctionne correctement.</p>
</div>
</div>
<div class="sect4">
<h5 id="grafana-simplejson-query"><a class="anchor" href="#grafana-simplejson-query"></a>POST /api/grafana/simplejson/query</h5>
<div class="paragraph">
<p>Permet de rechercher des measures pour les métriques désirées. Divers paramètres sont disponibles.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">panelId</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">range</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2016-10-31T06:33:44.866Z</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2016-10-31T12:33:44.866Z</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">raw</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">now-6h</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">now</span><span class="delimiter">&quot;</span></span>
        }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">rangeRaw</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">now-6h</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">now</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">interval</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">30s</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">intervalMs</span><span class="delimiter">&quot;</span></span>: <span class="integer">30000</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">targets</span><span class="delimiter">&quot;</span></span>: [
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">refId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">timeserie</span><span class="delimiter">&quot;</span></span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">refId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">B</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">timeserie</span><span class="delimiter">&quot;</span></span> }
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adhocFilters</span><span class="delimiter">&quot;</span></span>: [{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">City</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">operator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Berlin</span><span class="delimiter">&quot;</span></span>
    }],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">json</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">maxDataPoints</span><span class="delimiter">&quot;</span></span>: <span class="integer">550</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de requête minimale :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">targets</span><span class="delimiter">&quot;</span></span>: [
      { <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span> }
    ]
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possible</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permet de renseigner les métriques pour lesquelles on souhaite obtenir des measures.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets/target</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom d&#8217;une métrique pour laquelle on souhaite obtenir des measures.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui (au moins une métrique doit être renseignée)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/range/from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de début pour rechercher les measures. Il ne sera retourné que les measures avec une
date supérieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le 1 Janvier 1970 (UTC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/range/to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de fin pour rechercher les measures. Il ne sera retourné que les measures avec une
date inférieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La valeur par défaut est l&#8217;infini</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/maxDataPoints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum de measure désirés pour chaque métrique (En effet le but est de tracer des measures sur un graphe).
Si nécessaire les measures seront échantillonnés avec un algorithme de sampling par défaut.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">positif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/adhocFilters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utilisé par grafana</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Le reste des paramètres sont des paramètres qui sont envoyés par grafana
mais qui ne sont pas exploités pour le moment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Exemple de réponse</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>:[
      [<span class="integer">622</span>,<span class="integer">1450754160000</span>],
      [<span class="integer">365</span>,<span class="integer">1450754220000</span>]
    ]
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_90</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>:[
      [<span class="integer">861</span>,<span class="integer">1450754160000</span>],
      [<span class="integer">767</span>,<span class="integer">1450754220000</span>]
    ]
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="grafana-simplejson-search"><a class="anchor" href="#grafana-simplejson-search"></a>POST /api/grafana/simplejson/search</h5>
<div class="paragraph">
<p>Permet de chercher les différentes métriques disponibles.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{ <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span> }</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/target</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une partie du nom de la métrique recherchée.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Le corps de la requête est optionnel.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_25</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_90</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_95</span><span class="delimiter">&quot;</span></span>]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="grafana-simplejson-annotations"><a class="anchor" href="#grafana-simplejson-annotations"></a>POST /api/grafana/simplejson/annotations</h5>
<div class="paragraph">
<p>Permet de chercher les annotations.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">range</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2020-2-14T01:43:14.070Z</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2020-2-14T06:50:14.070Z</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">limit</span><span class="delimiter">&quot;</span></span> : <span class="integer">100</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">tag1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">tag2</span><span class="delimiter">&quot;</span></span>],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">matchAny</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de réponse actuelle</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">annotation</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">annotation</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>
  }
]</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/range/from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de début pour rechercher les annotations. Il ne sera retourné que les annotations avec une
date supérieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le 1 Janvier 1970 (UTC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/range/to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de fin pour rechercher les annotations. Il ne sera retourné que les annotations avec une
date inférieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La valeur par défaut est l&#8217;infini</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum d&#8217;annotations à renvoyer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste de string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom des tags pour filtrer les annotations. Le comportement dépend de la valeur du champs <em>/type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[] (empty array)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/matchAny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si le champs <em>type</em> vaut <em>TAGS</em>. Si <em>true</em> les annotations doivent avoir au moins un des tags du champs <em>tags</em>
sinon les annotations doivent contenir tous les tags.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le type de requête. Si la valeur est "ALL", toutes les annotations dans l&#8217;interval de temps seront renvoyées.
Si le type est "TAGS", les annotations devront en plus contenir des tags (soit tous soit au moins un selon
la valeur de <em>matchAny</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">une valeur parmi [ALL, TAGS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ALL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="grafana-simplejson-tag-keys"><a class="anchor" href="#grafana-simplejson-tag-keys"></a>POST /api/grafana/simplejson/tag-keys</h5>
<div class="paragraph">
<p>Permet de connaître les clés utilisables dans l&#8217;endpoint <em>tag_values</em>.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">City</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span>}
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les valeurs dans "text" sont les valeurs utilisables comme clé dans l&#8217;endpoint tag-values.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/range/from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de début pour rechercher les annotations. Il ne sera retourné que les annotations avec une
date supérieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le 1 Janvier 1970 (UTC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/range/to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de fin pour rechercher les annotations. Il ne sera retourné que les annotations avec une
date inférieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La valeur par défaut est l&#8217;infini</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum d&#8217;annotations à renvoyer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste de string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom des tags pour filtrer les annotations. Le comportement dépend de la valeur du champs <em>/type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[] (empty array)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/matchAny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si le champs <em>type</em> vaut <em>TAGS</em>. Si <em>true</em> les annotations doivent avoir au moins un des tags du champs <em>tags</em>
sinon les annotations doivent contenir tous les tags.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le type de requête. Si la valeur est "ALL", toutes les annotations dans l&#8217;interval de temps seront renvoyées.
Si le type est "TAGS", les annotations devront en plus contenir des tags (soit tous soit au moins un selon
la valeur de <em>matchAny</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">une valeur parmis [ALL, TAGS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ALL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="grafana-simplejson-tag-values"><a class="anchor" href="#grafana-simplejson-tag-values"></a>POST /api/grafana/simplejson/tag-values</h5>
<div class="paragraph">
<p>Permet de chercher les différentes métriques disponibles.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{<span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">City</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Eins!</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Zwei</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Drei!</span><span class="delimiter">&quot;</span></span>}
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici les valeurs disponibles pour les clés correspondantes.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-compatible-avec-le-plugin-hurence-historian"><a class="anchor" href="#api-compatible-avec-le-plugin-hurence-historian"></a>Api compatible avec le plugin "Hurence-Historian"</h4>
<div class="sect4">
<h5 id="grafana-hurence-datasource-root"><a class="anchor" href="#grafana-hurence-datasource-root"></a>GET /api/grafana/v0</h5>
<div class="paragraph">
<p>Cet endpoint renvoie une réponse 200 'OK' si l&#8217;historian fonctionne correctement.</p>
</div>
</div>
<div class="sect4">
<h5 id="grafana-hurence-datasource-query"><a class="anchor" href="#grafana-hurence-datasource-query"></a>POST /api/grafana/v0/query</h5>
<div class="paragraph">
<p>Permet de rechercher des measures pour les métriques désirées. Divers paramètres sont disponibles.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2016-10-31T06:33:44.866Z</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2020-10-31T12:33:44.866Z</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">names</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">metric_1</span><span class="delimiter">&quot;</span></span>],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">json</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">max_data_points</span><span class="delimiter">&quot;</span></span>: <span class="integer">30</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sensor</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">sensor_1</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">sampling</span><span class="delimiter">&quot;</span></span>:{
     <span class="key"><span class="delimiter">&quot;</span><span class="content">algorithm</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MIN</span><span class="delimiter">&quot;</span></span>,
     <span class="key"><span class="delimiter">&quot;</span><span class="content">bucket_size</span><span class="delimiter">&quot;</span></span> : <span class="integer">100</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de requête minimale :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">metric_1</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>: [
            [
                <span class="integer">622</span>,
                <span class="integer">1477895624866</span>
            ],
            [
                <span class="integer">-3</span>,
                <span class="integer">1477916224866</span>
            ],
            [
                <span class="integer">365</span>,
                <span class="integer">1477917224866</span>
            ]
        ]
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>{
"tags": {
"sensor" : "sensor_1"
},
"sampling":{
"algorithm": "MIN",
"bucket_size" : 100
}
}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permet de renseigner les métriques pour lesquelles on souhaite obtenir des measures.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de début pour rechercher les measures. Il ne sera retourné que les measures avec une
date supérieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le 1 Janvier 1970 (UTC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de fin pour rechercher les measures. Il ne sera retourné que les measures avec une
date inférieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La valeur par défaut est l&#8217;infini</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/max_data_points</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum de measure désirés pour chaque métrique (En effet le but est de tracer des measures sur un graphe).
Si nécessaire les measures seront échantillonnés avec un algorithme de sampling par défaut.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">positif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sampling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un objet qui va contenir les information des paramètres à utiliser pour l&#8217;échantillonage des measures si le nombre de measures
à retourner est supérieur au nombre maximum de measure demandé.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sampling/algorithm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L&#8217;algorithme à utiliser pour l&#8217;échantillonnage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">les valeurs possibles sont ["NONE", "AVERAGE", "FIRST", "MIN", "MAX"]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AVERAGE (la moyenne des measures pour chaque bucket, le timestamp utilisé est celui du premier measure du bucket)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sampling/bucket_size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La taille des buckets souhaité pour échantillonner les données. Attention cette taille peut être changée par le serveur
si cela est incompatible avec le nombre maximum de measure retournés souhaité.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculé automatiquement par le serveur afin d&#8217;obtenir au plus le nombre maximum de measures.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permet d&#8217;obtenir uniquement les measures des chunks qui contiennent les tags renseignés. Les tags doivent être indiqués
sous la forme d&#8217;une map de clés / valeurs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pas de tags.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Exemple de réponse</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>:[
      [<span class="integer">622</span>,<span class="integer">1450754160000</span>],
      [<span class="integer">365</span>,<span class="integer">1450754220000</span>]
    ]
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_90</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">datapoints</span><span class="delimiter">&quot;</span></span>:[
      [<span class="integer">861</span>,<span class="integer">1450754160000</span>],
      [<span class="integer">767</span>,<span class="integer">1450754220000</span>]
    ]
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="grafana-hurence-datasource-search"><a class="anchor" href="#grafana-hurence-datasource-search"></a>POST /api/grafana/v0/search</h5>
<div class="paragraph">
<p>Permet de chercher les différentes métriques disponibles.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">limit</span><span class="delimiter">&quot;</span></span>: <span class="integer">5</span>
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une partie du nom de la métrique recherché.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum de noms de métriques à retourner.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Le corps de la requête est optionnel.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_25</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_90</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_95</span><span class="delimiter">&quot;</span></span>]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="grafana-hurence-datasource-search-values"><a class="anchor" href="#grafana-hurence-datasource-search-values"></a>POST /api/grafana/v0/search/values</h5>
<div class="paragraph">
<p>Permet de chercher les différentes valeurs pour la clé indiquée.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">field</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">query</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">up</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">limit</span><span class="delimiter">&quot;</span></span>: <span class="integer">5</span>
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">la clé recherchée.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une partie du nom de la clé recherchée.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum de noms de métriques à retourner.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Les paramètres query et limit de la requête sont optionnels.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_25</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_50</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_75</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_90</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">upper_95</span><span class="delimiter">&quot;</span></span>]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="grafana-hurence-datasource-annotations"><a class="anchor" href="#grafana-hurence-datasource-annotations"></a>POST /api/grafana/v0/annotations</h5>
<div class="paragraph">
<p>Permet de chercher les annotations.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2020-2-14T01:43:14.070Z</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2020-2-14T06:50:14.070Z</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">limit</span><span class="delimiter">&quot;</span></span> : <span class="integer">100</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">tag1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">tag2</span><span class="delimiter">&quot;</span></span>],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">matchAny</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de réponse actuelle</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">annotations</span><span class="delimiter">&quot;</span></span> : [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>: <span class="integer">1581669794070</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">annotation 7</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">tag2</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">tag3</span><span class="delimiter">&quot;</span></span>]
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>: <span class="integer">1581666194070</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">annotation 6</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">tag3</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">tag5</span><span class="delimiter">&quot;</span></span>]
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">total_hit</span><span class="delimiter">&quot;</span></span> : <span class="integer">2</span>
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Paramètres de la requête</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 7%;">
<col style="width: 20%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">json path</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">requis</th>
<th class="tableblock halign-left valign-top">valeurs possibles</th>
<th class="tableblock halign-left valign-top">valeur par défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de début pour rechercher les annotations. Il ne sera retourné que les annotations avec une
date supérieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le 1 Janvier 1970 (UTC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La date de fin pour rechercher les annotations. Il ne sera retourné que les annotations avec une
date inférieure ou égale à cette date.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doit réprésenter une date au format suivant (UTC) : <strong>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La valeur par défaut est l&#8217;infini</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nombre maximum d&#8217;annotations à renvoyer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste de string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le nom des tags pour filtrer les annotations. Le comportement dépend de la valeur du champs <em>/type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[] (empty array)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/matchAny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si le champs <em>type</em> vaut <em>TAGS</em>. Si <em>true</em> les annotations doivent avoir au moins un des tags du champs <em>tags</em>
sinon les annotations doivent contenir tous les tags.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le type de requête. Si la valeur est "ALL", toutes les annotations dans l&#8217;interval de temps seront renvoyées.
Si le type est "TAGS", les annotations devront en plus contenir des tags (soit tous soit au moins un selon
la valeur de <em>matchAny</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">une valeur parmis [ALL, TAGS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ALL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="grafana-hurence-datasource-tag-keys"><a class="anchor" href="#grafana-hurence-datasource-tag-keys"></a>POST /api/grafana/v0/tag-keys</h5>
<div class="paragraph">
<p>Permet de connaître les clés utilisables dans l&#8217;endpoint <em>tag_values</em>.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Algo</span><span class="delimiter">&quot;</span></span>
    },
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">int</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bucket size</span><span class="delimiter">&quot;</span></span>
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les valeurs dans "text" sont les valeurs utilisables comme clé dans l&#8217;endpoint tag-values.</p>
</div>
</div>
<div class="sect4">
<h5 id="grafana-hurence-datasource-tag-values"><a class="anchor" href="#grafana-hurence-datasource-tag-values"></a>POST /api/grafana/simplejson/tag-values</h5>
<div class="paragraph">
<p>Permet de chercher les différentes métriques disponibles.</p>
</div>
<div class="paragraph">
<p>Exemple de requête :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{<span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Algo</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exemple de réponse :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NONE</span><span class="delimiter">&quot;</span></span>
    },
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">AVERAGE</span><span class="delimiter">&quot;</span></span>
    },
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">FIRST</span><span class="delimiter">&quot;</span></span>
    },
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MIN</span><span class="delimiter">&quot;</span></span>
    },
    {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MAX</span><span class="delimiter">&quot;</span></span>
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici les valeurs disponibles pour les clés correspondantes.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v1.0<br>
Last updated 2020-07-06 16:11:01 +0200
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>